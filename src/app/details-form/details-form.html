<section class="application-form">
  <h2>Solicitar informacion</h2>
  <p class="form-description">
    Complete el formulario para recibir mas informacion sobre esta propiedad.
  </p>

  <form [formGroup]="applyForm" (ngSubmit)="submitApplication()">
    <!-- [formGroup]: vincula template con FormGroup para validacion reactiva -->
    <div class="form-group">
      <label for="first-name">Nombre *</label>
      <input
        id="first-name"
        type="text"
        formControlName="firstName"
        [class.invalid]="isFieldInvalid('firstName')"
        placeholder="Ingresa tu nombre"
      />
      @if (isFieldInvalid('firstName')) {
        <span class="error-message">{{ getErrorMessage('firstName') }}</span>
      }
    </div>

    <div class="form-group">
      <label for="last-name">Apellido *</label>
      <input
        id="last-name"
        type="text"
        formControlName="lastName"
        [class.invalid]="isFieldInvalid('lastName')"
        placeholder="Ingresa tu apellido"
      />
      @if (isFieldInvalid('lastName')) {
        <span class="error-message">{{ getErrorMessage('lastName') }}</span>
      }
    </div>
    <div class="form-group">
      <label for="phone">Phone number *</label>
      <input
        id="phone"
        type="number"
        formControlName="phone"
        [class.invalid]="isFieldInvalid('phone')"
        placeholder="999999999"
      />
      @if (isFieldInvalid('phone')) {
        <span class="error-message">{{ getErrorMessage('phone') }}</span>
      }
    </div>

    <div class="form-group">
      <label for="email">Email *</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        [class.invalid]="isFieldInvalid('email')"
        placeholder="ejemplo@email.com"
      />
      @if (isFieldInvalid('email')) {
        <span class="error-message">{{ getErrorMessage('email') }}</span>
      }
    </div>

    <div class="form-group">
      <label for="date">date *</label>
      <input
        id="date"
        type="date"
        formControlName="date"
        [class.invalid]="isFieldInvalid('date')"
        placeholder="05/02/2026"
      />
      @if (isFieldInvalid('date')) {
        <span class="error-message">{{ getErrorMessage('date') }}</span>
      }
    </div>
    <div class="form-group">
      <label for="text">Mensaje *</label>
      <input
        id="text"
        type="textarea"
        formControlName="text"
        [class.invalid]="isFieldInvalid('text')"
        placeholder="Mensaje..."
      />
      @if (isFieldInvalid('text')) {
        <span class="error-message">{{ getErrorMessage('text') }}</span>
      }
    </div>
    <div class="form-group">
      <label for="check">Politica de privacidad *</label>
      <input
        id="check"
        type="checkbox"
        formControlName="check"
        [class.invalid]="isFieldInvalid('check')"
      />
      @if (isFieldInvalid('check')) {
        <span class="error-message">{{ getErrorMessage('check') }}</span>
      }
    </div>

    <!-- [disabled]: deshabilita el boton cuando la expresion es true para evitar envios invalidos -->
    <button type="submit" class="primary" [disabled]="applyForm.invalid">Enviar solicitud</button>
  </form>

  <p class="form-note">* Los datos del formulario se guardaran automaticamente en tu navegador</p>
</section>
